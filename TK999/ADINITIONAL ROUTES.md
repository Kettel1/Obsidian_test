Что нужно сделать:
1. Механизм нотификаций (уведомлений)
2. Механизм согласований
3. Дополнительные рейсы


**Будет следующий воркфлоу:**
#### **1. Механизм нотификаций**
- Уведомления приходят диспетчеру, если:
    - Рейс на дату от текущей до +30 дней заполнен на 100%.
- Уведомления содержат информацию:
    - Номер рейса
    - Дата и время
    - Маршрут
- Действия диспетчера:
    1. Создать согласование на дополнительный рейс.
    2. Выбрать ответственных лиц.
    3. Указать параметры рейса (дата, машина, маршрут).

#### **2. Механизм согласований**
- **Создание согласования:**
    - Параметры согласования:
        1. Рейс
        2. Дата
        3. Машина
        4. Список ответственных
    - Тип согласования определяет дополнительные поля.
- **Действия ответственных:**
    1. Изменить параметры (например, машину).
    2. Принять или отклонить согласование.
        - Если отклонено: указать причину (опционально).
        - Если принято: будут выполнен указанные действия (создать рейс).
- **Сроки:** Указать крайний срок для согласования. При нарушении:
    - Согласование отменяется автоматически.

#### **3. Логика дополнительных рейсов**
- **Общие параметры:**
    - Унаследовать маршрут, время и цену из основного рейса.
    - Исключение: машина, которая указывается отдельно.
- **Отмена рейса:**
    - Может быть отменен:
        1. Решением ответственного лица.
        2. Из-за низкой заполненности (продано менее X билетов).
    - Действия:
        - Клиенты уведомляются путем обзвона диспетчерами
- **Заполнение рейса:**
    - Если основной рейс заполняется:
        - Дополнительный открывается для продаж.
    - На клиентской стороне:
        - Автоматический выбор между основным и дополнительным рейсом.
        - Клиент видит только доступные места, без выбора типа рейса.


После получения уведомления, диспетчеры должны создать согласование на создание дополнительного рейса на эту дату и на этот маршрут, который будет направлен ответственным лицам (их может быть несколько, либо один, список определен заранее) которых выберут диспетчеры.
Диспетчеру при создании согласования нужно выбрать тип согласования, где взависимости от типа согласования будут разные поля для заполнения, для примера возьмем согласование доп рейса будут иметь следующие поля:
1) Рейс
2) Дата
3) Машина
4) Список ответственных

Ответственным лицам будет направленно СМС оповещение о том, что требуется согласовать дополнительный рейс
Ответственные лица должны будут зайти в дашборд, зайти в раздел согласований и посмотреть актуальные согласования, кто их создал и что требуется.

Ответственные лица в свою очередь могут:
1) Изменить машину на рейсе
2) Принять либо отклонить согласование
Если не согласовано:
- Указывается причина отказа в согласовании для того, чтобы в будущем можно было восстановить хронологию событий (опционально)
- Согласование отменяется и помещается в историю
Если согласовано:
- Выполняется действие, которое требуется в согласовании

В админ панели появятся новые вкладки:
1) Уведомления
- Будет содержать под собой оповещение о заполненных рейсах
2) Дополнительные рейсы
- Внутри буду храниться все рейс запущенные в дополнение к основным, исключительно информация о том, что доп рейс существует и их история
3) Согласования
- Внутри будет история и активные согласования

Что поменяется из логики:
- При создании доп рейса, на него нужно будет назначать водителя для электронной ведомости
- Электронная ведомость, созданная на доп рейс будет помечена плашкой "дополнительный рейс" для того чтобы их можно было различать
- При просмотре билетов во вкладке "все билеты", если у конкретного маршрута на конкретную дату будет доп рейс, то будет выпадающий список где нужно будет выбрать либо "основной", либо "дополнительный" чтобы можно было смотреть и "разделять" ведомости
- При создании билета из админки диспетчерами, или любыми кассирами, так же если основной рейс заполнен и открыт дополнительный, нужно будет выбирать в выпадающем списке либо "основной" либо "дополнительный"
- Для клиентов ничего не изменится в плане поведения, если рейс заполнен и открыт дополнительный, они как обычно будут заходить и покупать билет уже на дополнительный рейс, у них будет небольшая пометка о том, что это доп рейс.
- На клиентской части **нельзя выбрать** на какой рейс покупать билеты, на дополнительный либо на основной. Если открыт дополнительный рейс, для клиентов все продажи будут совершаться на доп рейс.


**Вопросы**
1. Может ли доп рейс отмениться? Если да, что делать с купленными билетами, и кто принимает решение о его отмене? Кто может его отменить?
2. Если доп рейс создан, но заполнен менее чем на X%, что с ним делать? (например была была продажа лишь одного билета)
3. Нужна ли возможность перемещать билеты между дополнительным рейсами и основным? Например, перекинуть билет с дополнительного на основной
4. Сколько может быть дополнительных рейсов? Только один, или любое количество
5. Есть ли крайний срок, в течение которого ответственным лицам нужно принять решение по согласованию? Что происходит если сроки нарушены? Согласование должно отменится?
6. Может ли диспетчер редактировать уже созданное согласование?
7. Дополнительный должен унаследовать все параметры основного(остановки, время, цену) за исключением машины?
